# Drag-and-Drop Flow Diagram

## User Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER STARTS DRAG                          â”‚
â”‚                                                               â”‚
â”‚  1. User long-presses on a card (500ms+)                    â”‚
â”‚     â†“                                                         â”‚
â”‚  2. Light haptic vibration triggers                          â”‚
â”‚     â†“                                                         â”‚
â”‚  3. Card becomes semi-transparent (50% opacity)              â”‚
â”‚     â†“                                                         â”‚
â”‚  4. Floating overlay appears following pointer               â”‚
â”‚     â†“                                                         â”‚
â”‚  5. Drag sound plays (if audio files present)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DURING DRAG                               â”‚
â”‚                                                               â”‚
â”‚  User moves finger across screen:                            â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   TODO   â”‚    â”‚  DOING   â”‚    â”‚   DONE   â”‚              â”‚
â”‚  â”‚          â”‚    â”‚ [HOVER]  â”‚    â”‚          â”‚              â”‚
â”‚  â”‚  Card 1  â”‚    â”‚  Card 2  â”‚    â”‚  Card 3  â”‚              â”‚
â”‚  â”‚  Card 2  â”‚    â”‚  Card 4  â”‚    â”‚  Card 5  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                       â†‘                                       â”‚
â”‚                  Blue border                                  â”‚
â”‚                  highlights                                   â”‚
â”‚                  active column                                â”‚
â”‚                                                               â”‚
â”‚  â€¢ Overlay follows pointer in real-time                      â”‚
â”‚  â€¢ System continuously checks column bounds                  â”‚
â”‚  â€¢ Target column gets visual highlight                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER RELEASES                             â”‚
â”‚                                                               â”‚
â”‚  System checks drop location:                                â”‚
â”‚                                                               â”‚
â”‚  Case 1: Dropped over DIFFERENT column                       â”‚
â”‚    âœ… Card moves to new column                               â”‚
â”‚    âœ… Database updates card status                           â”‚
â”‚    âœ… Medium haptic feedback                                 â”‚
â”‚    âœ… Drop sound plays                                        â”‚
â”‚                                                               â”‚
â”‚  Case 2: Dropped over DONE column                            â”‚
â”‚    âœ… Card moves to DONE                                      â”‚
â”‚    âœ… Database updates                                        â”‚
â”‚    âœ… Success haptic (double vibration) ğŸ“³ğŸ“³                 â”‚
â”‚    âœ… Done sound plays                                        â”‚
â”‚    âœ… CONFETTI ANIMATION EXPLODES! ğŸ‰                        â”‚
â”‚                                                               â”‚
â”‚  Case 3: Dropped over SAME column                            â”‚
â”‚    âŒ No change - card stays in place                        â”‚
â”‚                                                               â”‚
â”‚  Case 4: Dropped OUTSIDE all columns                         â”‚
â”‚    âŒ No change - card returns to origin                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MainActivity                            â”‚
â”‚  (Sets up database, ViewModels, billing)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BoardScreen                              â”‚
â”‚  â€¢ Creates DragDropState (shared state)                     â”‚
â”‚  â€¢ Manages 3 KanbanColumns                                   â”‚
â”‚  â€¢ Handles drop callbacks                                    â”‚
â”‚  â€¢ Triggers haptics, sounds, confetti                        â”‚
â”‚  â€¢ Updates database via CardViewModel                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â†“                  â†“                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KanbanColumn â”‚   â”‚ KanbanColumn â”‚   â”‚ KanbanColumn â”‚
â”‚   (TODO)     â”‚   â”‚   (DOING)    â”‚   â”‚   (DONE)     â”‚
â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚ â€¢ Registers  â”‚   â”‚ â€¢ Registers  â”‚   â”‚ â€¢ Registers  â”‚
â”‚   bounds     â”‚   â”‚   bounds     â”‚   â”‚   bounds     â”‚
â”‚ â€¢ Highlights â”‚   â”‚ â€¢ Highlights â”‚   â”‚ â€¢ Highlights â”‚
â”‚   on hover   â”‚   â”‚   on hover   â”‚   â”‚   on hover   â”‚
â”‚              â”‚   â”‚              â”‚   â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚CardItemâ”‚ â”‚   â”‚  â”‚CardItemâ”‚ â”‚   â”‚  â”‚CardItemâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚CardItemâ”‚ â”‚   â”‚  â”‚CardItemâ”‚ â”‚   â”‚  â”‚CardItemâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   DragDropState     â”‚
                â”‚  (Shared State)     â”‚
                â”‚                     â”‚
                â”‚ â€¢ isDragging        â”‚
                â”‚ â€¢ draggedCard       â”‚
                â”‚ â€¢ dragOffset        â”‚
                â”‚ â€¢ targetColumn      â”‚
                â”‚ â€¢ columnBounds      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†‘
                           â”‚ Observes
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚  Dragging   â”‚      â”‚  Confetti   â”‚
         â”‚Card Overlay â”‚      â”‚  Animation  â”‚
         â”‚             â”‚      â”‚             â”‚
         â”‚ â€¢ Follows   â”‚      â”‚ â€¢ 50 color  â”‚
         â”‚   pointer   â”‚      â”‚   particles â”‚
         â”‚ â€¢ Shows on  â”‚      â”‚ â€¢ 2s anim   â”‚
         â”‚   top       â”‚      â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Flow Diagram

```
                         START
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Card Idle   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              User long-presses card
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Drag Started â”‚
                    â”‚              â”‚
                    â”‚ isDragging=  â”‚
                    â”‚    true      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
          â†“                â†“                â†“
    Update drag      Register          Light haptic
      position        dragged           triggered
                       card
          â”‚                â”‚                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  User Dragging â”‚
                  â”‚                â”‚
                  â”‚ Continuously   â”‚
                  â”‚ check column   â”‚
                  â”‚ bounds         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â†“                  â†“                  â†“
  Over TODO         Over DOING          Over DONE
  Column            Column              Column
        â”‚                  â”‚                  â”‚
  targetColumn=      targetColumn=      targetColumn=
    TODO               DOING              DONE
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
               User releases finger
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Drag Ended  â”‚
                    â”‚              â”‚
                    â”‚ isDragging=  â”‚
                    â”‚   false      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â†“                  â†“                  â†“
   targetColumn      targetColumn      targetColumn
    = null           = same col       â‰  original col
        â”‚                  â”‚                  â”‚
   No change          No change       Update database
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Feedback &   â”‚
                    â”‚  Animation   â”‚
                    â”‚              â”‚
                    â”‚ â€¢ Haptics    â”‚
                    â”‚ â€¢ Sounds     â”‚
                    â”‚ â€¢ Confetti   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                         END
```

## Data Flow

```
User Gesture â†’ CardItem â†’ DragDropState â†’ KanbanColumn â†’ BoardScreen
                   â†“            â†“              â†“              â†“
              Gesture        State          Visual        Callback
              Detection     Update         Feedback       Handler
                   â†“            â†“              â†“              â†“
              Long-press    Track drag     Highlight    Update DB
              detected      position       column       via ViewModel
                   â†“            â†“              â†“              â†“
              Update          Store         Border       Trigger
              overlay         target        effect       feedback
                               column
                                              â†“
                                        Confetti if
                                        DONE column
```

## Key Coordinates

```
Screen Space:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† (0, 0) Root
â”‚  TopAppBar                           â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ TODO â”‚  â”‚DOING â”‚  â”‚ DONE â”‚      â”‚
â”‚  â”‚      â”‚  â”‚      â”‚  â”‚      â”‚      â”‚
â”‚  â”‚ x1,y1â”‚  â”‚ x2,y2â”‚  â”‚ x3,y3â”‚      â”‚
â”‚  â”‚  â†“   â”‚  â”‚  â†“   â”‚  â”‚  â†“   â”‚      â”‚
â”‚  â”‚ w1,h1â”‚  â”‚ w2,h2â”‚  â”‚ w3,h3â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                      â”‚
â”‚                  ğŸ‘† (dragX, dragY)  â”‚
â”‚                  Drag pointer       â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â€¢ Each column has Rect(x, y, width, height)
â€¢ Drag position is Offset(x, y)
â€¢ System checks: dragOffset âˆˆ columnRect?
```

---

**Visual Legend:**
- `[ ]` = Checkboxes (features to implement)
- `[x]` = Completed features âœ…
- `â†’` = Data flow direction
- `â†“` = Sequential steps
- `ğŸ‰` = Celebration/special effect
- `ğŸ“³` = Haptic feedback
- `ğŸ”Š` = Sound effect




